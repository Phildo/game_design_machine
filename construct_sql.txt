CREATE DATABSE design_a_game;

CREATE TABLE machines (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, url VARCHAR(64), pass VARCHAR(64), created TIMESTAMP DEFAULT CURRENT_TIMESTAMP, last_active TIMESTAMP DEFAULT '0000-00-00 00:00:00');

CREATE TABLE categories (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(64) DEFAULT '???', is_default TINYINT(1) UNSIGNED DEFAULT 0, use_count INT(32) UNSIGNED DEFAULT 0);
CREATE INDEX find_defaults ON categories(is_default);

CREATE TABLE options (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, category INT(32) UNSIGNED NOT NULL, name VARCHAR(64) DEFAULT '???', is_default TINYINT(1) UNSIGNED DEFAULT 0, use_count INT(32) UNSIGNED DEFAULT 0);
CREATE INDEX find_defaults ON options(is_default);

CREATE TABLE machine_categories (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, m_id INT(32) UNSIGNED, c_id INT(32) UNSIGNED);
CREATE INDEX find_category ON machine_categories(m_id);

CREATE TABLE machine_options (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, m_id INT(32) UNSIGNED, c_id INT(32) UNSIGNED, o_id INT(32) UNSIGNED);
CREATE INDEX find_option ON machine_options(m_id, c_id);

CREATE TABLE icons (id INT(32) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, link_type ENUM('CATEGORY','OPTION'), link_id INT(32) UNSIGNED, icon VARCHAR(64));
CREATE INDEX find_icon ON icons(link_type, link_id);
